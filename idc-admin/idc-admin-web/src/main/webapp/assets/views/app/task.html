<div class="row fade-in-up" ng-if="!showMonitor&&!showHistory">
    <div class="col-md-12">
        <!-- portlet box -->
        <div class="portlet light ">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-gift"></i>查询条件
                </div>
                <div class="tools">
                    <a class="collapse" href="javascript:;" data-original-title="" title="">
                    </a>
                </div>
            </div>

            <div class="portlet-body ">
                <div class="row">
                <!-- BEGIN FORM-->
                <form role="form" class="form-horizontal"
                      onsubmit="return false;">
                    <div class="row">
                        <div class=" col-md-6 col-lg-3">
                            <div class="form-group">
                                <label class="col-md-2 col-lg-4  control-label">任务名称:</label>
                                <div class="col-md-10 col-lg-8">
                                    <input type="text" class="form-control  input-medium"
                                           ng-model="queryCondition.taskName">
                                </div>
                            </div>
                        </div>
                        <div class=" col-md-6 col-lg-3">
                            <div class="form-group">
                                <label class="col-md-2 col-lg-4  control-label">类名:</label>
                                <div class="col-md-10 col-lg-8">
                                    <input type="text" class="form-control  input-medium"
                                           ng-model="queryCondition.className">
                                </div>
                            </div>
                        </div>
                        <div class=" col-md-6 col-lg-3">
                            <div class="form-group">
                                <label class="col-md-2 col-lg-4  control-label">任务类型:</label>
                                <div class="col-md-10 col-lg-8">
                                    <select class="form-control input-medium"
                                            ng-options="item.value as item.key for item in taskTypeOptions"
                                            ng-model="queryCondition.taskType">
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class=" col-md-6 col-lg-3">
                            <div class="form-group">
                                <div class="col-md-8 col-md-offset-2 ">
                                    <button class="btn green control-label " type="submit"
                                            ng-click="tableParams.search()"><i
                                            class="fa fa-search"></i>查询
                                    </button>
                                    <button class="btn blue control-label " type="submit"
                                            ng-click="resetForm()"><i
                                            class="fa fa-rotate-left "></i>重置
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <!-- END FORM-->
            </div>
            </div>
        </div>
        <!--portlet box-->
        <div class="portlet light ">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-list-ul"></i>任务列表
                </div>
                <div class="tools">
                    <button class="btn btn-circle green btn-outline  btn-sm" ng-click="showTaskModal()">
                        <i class="fa fa-plus"></i>
                        新建任务
                    </button>
                    <button type="button" class="btn btn-circle green btn-outline  btn-sm"
                            ng-click="tableParams.reload()">
                        <i class="fa fa-repeat"></i>
                        刷新
                    </button>
                    <button type="button"
                            class="btn yellow btn-outline btn-circle btn-sm"
                            ng-click="show=!show">
                        <i ng-class="show?'fa fa-chevron-left':'fa fa-chevron-right'">
                            <span ng-bind-html="show?'基本信息':'详细信息'"></span>
                        </i>
                    </button>
                </div>
            </div>
            <div class="portlet-body">
                <div class="table-responsive">
                    <table ng-table="tableParams"
                           class="table table-striped table-bordered table-hover">
                        <!--template-pagination="tablePager.html">-->
                        <tr ng-repeat="row in rows">
                            <td class="text-center " header-class="ddc-white-space-nowrap" data-title="'任务编号'"
                                ng-bind-html="row.taskId">
                            </td>
                            <td data-title="'操作'" class=" ddc-white-space-nowrap" header-class="ddc-white-space-nowrap">
                                <a class="btn  green btn-xs" ng-click="showTaskModal(row)"><i
                                        class="fa fa-edit"></i>编辑</a>
                                <a ng-if="row.taskType == 21" class="btn  green btn-xs"
                                   ng-click="showWorkFlow(row)"><i
                                        class="fa fa-edit"></i>编辑流程</a>
                                <a ng-if="row.taskType!=12 && row.taskStatus == 1" class="btn  blue btn-xs"
                                   ng-click="executeTask(row)"><i
                                        class="fa fa-youtube-play"></i>执行</a>
                                <a ng-if="row.taskType!=12 &&row.taskStatus == 0" class="btn  blue btn-xs"
                                   ng-click="modifyTaskStatus(row,true)"><i
                                        class="fa fa-play"></i>启用</a>
                                <a ng-if="row.taskType!=12 &&row.taskStatus == 1" class="btn  red btn-xs"
                                   ng-click="modifyTaskStatus(row,false)"><i
                                        class="fa fa-stop"></i>停用</a>
                                <a ng-if="row.taskType==12 || row.taskStatus != 1" class="btn red btn-xs"
                                   ng-click="deleteTask(row.taskId)"><i
                                        class="fa fa-times"></i>删除</a>
                                <a class="btn  yellow btn-xs"
                                   ui-sref="taskHistory({ appId: $stateParams.appId,taskId:row.taskId,taskType:row.taskType })"><i
                                        class="fa fa-history"></i>执行历史</a>
                                <a class="btn  blue btn-xs"
                                   ng-click="showMonitorPage(row)"><i
                                        class="fa fa-bar-chart"></i>统计报表</a>
                                <a class="btn purple btn-xs"
                                   ng-click="showHistoryPage(row)"><i
                                        class="fa fa-book"></i>变更记录</a>
                            </td>
                            <td class=" ddc-white-space-nowrap" header-class="ddc-white-space-nowrap"
                                data-title="'任务名称'" ng-bind-html="row.taskName">
                            </td>
                            <td class=" ddc-white-space-nowrap" header-class="ddc-white-space-nowrap" data-title="'类名'"
                                ng-bind-html="row.className">
                            </td>
                            <td class="text-center ddc-white-space-nowrap" header-class="ddc-white-space-nowrap"
                                data-title="'任务状态'"
                                ng-bind-html="row.taskStatus|taskStatusLabel|trustHtml">
                            </td>
                            <td class="text-center ddc-white-space-nowrap" header-class="ddc-white-space-nowrap"
                                data-title="'任务类型'"
                                ng-bind-html="row.taskType|taskTypeLabel|trustHtml">
                            </td>
                            <td class="text-center ddc-white-space-nowrap" header-class="ddc-white-space-nowrap"
                                data-title="'Cron脚本'" ng-bind-html="row.cron">
                            </td>
                            <td class="text-center ddc-white-space-nowrap" header-class="ddc-white-space-nowrap"
                                data-title="'上次执行结果'" ng-bind-html="row.lastExecuteStatus|executeResultLabel|trustHtml">
                            </td>
                            <td class="text-center ddc-white-space-nowrap" ng-if="show"
                                header-class="ddc-white-space-nowrap"
                                data-title="'执行结果描述'" ng-bind-html="row.lastExecuteMessage">
                            </td>
                            <td class="text-center ddc-white-space-nowrap" ng-if="show"
                                header-class="ddc-white-space-nowrap"
                                data-title="'上次执行时间'"
                                ng-bind-html="row.lastExecuteStartTime |date:'yyyy-MM-dd HH:mm:ss'">
                            </td>
                            <td class="text-center ddc-white-space-nowrap" ng-if="show"
                                header-class="ddc-white-space-nowrap"
                                data-title="'上次执行时长'"
                                ng-bind-html="(row.lastExecuteEndTime - row.lastExecuteStartTime)|timeDiff">
                            </td>
                            <td class="text-center ddc-white-space-nowrap" ng-if="show"
                                header-class="ddc-white-space-nowrap"
                                data-title="'上次执行实例'"
                                ng-bind-html="row.lastExecuteIp?row.lastExecuteIp+':'+row.lastExecutePort:''">
                            </td>
                            <td class="text-center ddc-white-space-nowrap" header-class="ddc-white-space-nowrap"
                                data-title="'下次运行时间'" ng-bind-html="row.nextFireTime|date:'yyyy-MM-dd HH:mm:ss'">
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>
<div class="row fade-in-up" ng-if="showMonitor">
    <div class="portlet light ">
        <div class="portlet-title">
            <div class="caption">
                <i class="fa fa-gift"></i>统计报表--{{ monitor.taskName }}
            </div>
            <div class="tools">
                <button type="button" class="btn btn-circle yellow btn-outline btn-sm" ng-click="back()">
                    <i class="fa fa-reply"></i>
                    返回
                </button>
            </div>
        </div>

        <div class="portlet-body ">
            <div class="row">
                    <h3 class="col-md-6 font-green bold">最近{{ title }}任务执行情况</h3>
                <div class="col-md-6">
                    <div class="btn-group pull-right" uib-dropdown dropdown-append-to-body>
                        <button type="button" class="btn btn-primary" uib-dropdown-toggle ng-click="loadData('day',1)">
                            最近1天 <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="btn-append-to-body">
                            <li role="menuitem"><a ng-click="loadData('day',3)">最近3天</a></li>
                            <li role="menuitem"><a ng-click="loadData('day',7)">最近7天</a></li>
                        </ul>

                    </div>
                    <div class="btn-group pull-right" uib-dropdown dropdown-append-to-body style="margin-right: 5px">
                        <button id="split-button" type="button" class="btn btn-primary" ng-click="loadData('hour',1)">最近1小时</button>
                        <button type="button" class="btn btn-primary" uib-dropdown-toggle>
                            <span class="caret"></span>
                            <span class="sr-only">Split button!</span>
                        </button>

                        <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="btn-append-to-body">
                            <li role="menuitem"><a ng-click="loadData('hour',3)">最近3小时</a></li>
                            <li role="menuitem"><a ng-click="loadData('hour',6)">最近6小时</a></li>
                            <li role="menuitem"><a ng-click="loadData('hour',12)">最近12小时</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div id="main1" style="width: 100%;height:400px;"></div>
            <h3 class="font-green bold">最近{{ title }}任务平均执行时长</h3>
            <div id="main2" style="width: 100%;height:400px;"></div>
        </div>
    </div>
</div>
<div class="row fade-in-up" ng-if="showHistory">
    <div class="portlet light ">
        <div class="portlet-title">
            <div class="caption">
                <i class="fa fa-gift"></i>变更记录--{{ history.taskName }}
            </div>
            <div class="tools">
                <button type="button" class="btn btn-circle green btn-outline  btn-sm"
                        ng-click="historyTableParams.reload()">
                    <i class="fa fa-repeat"></i>
                    刷新
                </button>
                <button type="button" class="btn btn-circle yellow btn-outline btn-sm" ng-click="back()">
                    <i class="fa fa-reply"></i>
                    返回
                </button>
            </div>
        </div>

        <div class="portlet-body ">
            <div class="table-responsive">
                <table ng-table="historyTableParams"
                       class="table table-striped table-bordered table-hover">
                    <tr ng-repeat="row in rows">
                        <td class="text-center ddc-white-space-nowrap"
                            header-class="ddc-white-space-nowrap"
                            data-title="'修改时间'"
                            ng-bind-html="row.updateTime |date:'yyyy-MM-dd HH:mm:ss'">
                        </td>
                        <td header-class="ddc-white-space-nowrap" data-title="'更新内容'">
                            <pre ng-bind-html="row.updateDetail"></pre>
                        </td>
                        <td class="text-center " header-class="ddc-white-space-nowrap" data-title="'修改者'"
                            ng-bind-html="row.updateUser">
                        </td>

                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>
<script type="text/ng-template" id="taskModal.html">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" ng-click="cancel()"></button>
            <h4 class="modal-title">{{ headerTitle }}</h4>
        </div>
        <div class="modal-body">
            <form action="#" class="form-horizontal" name="ngForm" novalidate>
                <div class="form-body">
                    <h3 class="form-section">任务基本信息</h3>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">任务名称:</label>
                                <div class="col-md-8">
                                    <input type="text" class="form-control" ng-model="postData.taskName" required>
                                    <span class="help-block"> 例如：定时数据汇总任务 </span>
                                </div>
                            </div>
                        </div>                        
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">任务大类:</label>
                                <div class="col-md-8">
                                    <div class="radio-list">
                                        <label class="radio-inline">
                                            <div class="radio"><span
                                                    ng-class="{true:'checked'}[postData.taskCategoty == 1]"><input
                                                    ng-disabled="readonly"
                                                    type="radio"
                                                    value=1 ng-model="postData.taskCategoty"></span></div>
                                            独立任务 </label>
                                        <label class="radio-inline">
                                            <div class="radio"><span
                                                    ng-class="{true:'checked'}[postData.taskCategoty == 2]"><input
                                                    ng-disabled="readonly"
                                                    type="radio"
                                                    ng-model="postData.taskCategoty"
                                                    value=2></span>
                                            </div>
                                            流程任务 </label>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">任务类型:</label>
                                <div class="col-md-8">
                                    <select class="form-control" ng-disabled="readonly"
                                            ng-options="item.value as item.key for item in taskTypeOptions"
                                            ng-model="postData.taskType" required>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">责任人:</label>
                                <div class="col-md-8">
                                    <input type="text" class="form-control" ng-model="postData.owner" required>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-md-4 control-label">任务描述:</label>
                                <div class="col-md-8">
                                    <textarea class="form-control" rows="3" ng-model="postData.description"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h3 class="form-section">配置信息</h3>
                    <!--/row-->
                    <div class="row" ng-if="postData.taskType != 21">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label col-md-2">类名:</label>
                                <div class="col-md-10">
                                    <div class="input-group">
                                        <input type="text" class="form-control" ng-model="postData.className" required
                                               ng-readonly="readonly">
                                        <div class="input-group-btn">
                                            <button type="button" class="btn yellow dropdown-toggle"
                                                    data-toggle="dropdown" ng-disabled="readonly">
                                                <i class="fa fa-angle-down"></i>
                                            </button>
                                            <ul class="dropdown-menu pull-right">
                                                <li ng-repeat="li in selectClassNameOptions">
                                                    <a ng-click="postData.className = li" ng-bind-html="li"> </a>
                                                </li>
                                            </ul>
                                        </div>
                                        <!-- /btn-group -->
                                    </div>
                                    <!-- /input-group -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="postData.taskType != 21">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label col-md-2">执行参数:</label>
                                <div class="col-md-10">
                                    <input type="text" class="form-control" ng-model="postData.parameters"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="postData.taskType != 12">
                        <div class="col-md-12">
                            <div class="form-group">

                                <label class="control-label col-md-2">任务状态:</label>
                                <div class="col-md-10">
                                    <input
                                            bs-switch
                                            ng-model="postData.taskStatus"
                                            type="checkbox" ng-true-value="1"
                                            ng-false-value="0"
                                            switch-on-text="启用"
                                            switch-off-text="停用"
                                            switch-off-color="danger"
                                            switch-on-color="success"
                                            ng-if="!((postData.taskType==21)&&(!postData.workflowId))"
                                    >
                                    <input
                                            bs-switch
                                            ng-model="postData.taskStatus"
                                            type="checkbox" ng-true-value="1"
                                            ng-false-value="0"
                                            switch-on-text="启用"
                                            switch-off-text="停用"
                                            switch-off-color="danger"
                                            switch-on-color="success"
                                            switch-readonly="true"
                                            ng-if="(postData.taskType==21)&&(!postData.workflowId)"
                                    >
                                    <span class="help-block" ng-if="(postData.taskType==21)&&(!postData.workflowId)">流程任务需要先创建任务流程，才能启用！！！</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="postData.taskType != 21">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">超时时间:</label>
                                <div class="col-md-8">
                                    <div class="input-group" style="width:150px;">
                                        <input ng-model="postData.timeout" type="text"
                                               class="spinner-input form-control" required>
                                        <span class="input-group-addon bootstrap-touchspin-postfix">秒</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="postData.taskType != 21">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">执行超时重试:</label>
                                <div class="col-md-8">
                                    <input
                                            bs-switch
                                            ng-model="postData.timeoutRetry"
                                            type="checkbox" ng-true-value=true
                                            ng-false-value=false
                                            switch-on-text="开启"
                                            switch-off-text="关闭"
                                    >
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6" ng-if="postData.timeoutRetry">
                            <div class="form-group">
                                <label class="control-label col-md-4">执行超时重试次数:</label>
                                <div class="col-md-8" ng-model="postData.timeoutRetryTimes" spinner min="1">
                                    <div class="input-group" style="width:150px;">
                                        <div class="spinner-buttons input-group-btn">
                                            <button type="button" class="btn spinner-up blue">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                        </div>
                                        <input type="text" class="spinner-input form-control">
                                        <div class="spinner-buttons input-group-btn">
                                            <button type="button" class="btn spinner-down red">
                                                <i class="fa fa-minus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="postData.taskType != 21">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">执行失败重试:</label>
                                <div class="col-md-8">
                                    <input
                                            bs-switch
                                            ng-model="postData.failedRetry"
                                            type="checkbox" ng-true-value=true
                                            ng-false-value=false
                                            switch-on-text="开启"
                                            switch-off-text="关闭"
                                    >
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="postData.failedRetry">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">执行失败重试次数:</label>
                                <div class="col-md-8" ng-model="postData.failedRetryTimes" spinner min="0">
                                    <div class="input-group" style="width:150px;">
                                        <div class="spinner-buttons input-group-btn">
                                            <button type="button" class="btn spinner-up blue">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                        </div>
                                        <input type="text" class="spinner-input form-control">
                                        <div class="spinner-buttons input-group-btn">
                                            <button type="button" class="btn spinner-down red">
                                                <i class="fa fa-minus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">执行失败重试间隔:</label>
                                <div class="col-md-8" ng-model="postData.failedRetryInterval" spinner min="0">
                                    <div class="input-group" style="width:150px;">
                                        <div class="spinner-buttons input-group-btn">
                                            <button type="button" class="btn spinner-up blue">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                        </div>
                                        <input type="text" class="spinner-input form-control">
                                        <span class="input-group-addon bootstrap-touchspin-postfix">秒</span>
                                        <div class="spinner-buttons input-group-btn">
                                            <button type="button" class="btn spinner-down red">
                                                <i class="fa fa-minus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="postData.taskType != 21">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">多线程运行:</label>
                                <div class="col-md-8">
                                    <input
                                            bs-switch
                                            ng-model="postData.mutithread"
                                            type="checkbox" ng-true-value=true
                                            ng-false-value=false
                                            switch-on-text="开启"
                                            switch-off-text="关闭"
                                            switch-change="postData.threads = 1"
                                    >
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6" ng-if="postData.mutithread">
                            <div class="form-group">
                                <label class="control-label col-md-4">线程数:</label>
                                <div class="col-md-8" ng-model="postData.threads" spinner>
                                    <div class="input-group" style="width:150px;">
                                        <div class="spinner-buttons input-group-btn">
                                            <button type="button" class="btn spinner-up blue">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                        </div>
                                        <input type="text" class="spinner-input form-control" maxlength="3">
                                        <div class="spinner-buttons input-group-btn">
                                            <button type="button" class="btn spinner-down red">
                                                <i class="fa fa-minus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">并行运行:</label>
                                <div class="col-md-8">
                                    <input
                                            bs-switch
                                            ng-model="postData.concurrency"
                                            type="checkbox" ng-true-value=true
                                            ng-false-value=false
                                            switch-on-text="开启"
                                            switch-off-text="关闭"
                                    >
                                </div>
                            </div>
                        </div>
                    </div>              
                    <div class="row" ng-if="postData.taskType == 11 || postData.taskType == 21">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">cron脚本:</label>
                                <div class="col-md-8">
                                    <input type="text" class="form-control" ng-model="postData.cron" required>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="postData.taskType == 12">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">执行等待时间:</label>
                                <div class="col-md-8 ">
                                    <div class="input-group" style="width:150px;">
                                        <input type="text" class="form-control" ng-model="postData.waitTime">
                                        <span class="input-group-addon" id="sizing-addon1">秒</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--简单任务特有配置开始-->
                    <div class="row" ng-if="postData.taskType == 13">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">执行开始时间:</label>
                                <div class="col-md-8">
                                    <input type="text" placeholder="yyyy-MM-dd HH:mm:ss" class="form-control" ng-model="postData.simpleStartTime" required>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="postData.taskType == 13">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">执行结束时间:</label>
                                <div class="col-md-8">
                                    <input type="text" placeholder="yyyy-MM-dd HH:mm:ss" class="form-control" ng-model="postData.simpleEndTime">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="postData.taskType == 13">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">执行次数:</label>
                                <div class="col-md-8" ng-model="postData.simpleRepeatCount" spinner min="0">
                                    <div class="input-group" style="width:150px;">
                                        <div class="spinner-buttons input-group-btn">
                                            <button type="button" class="btn spinner-up blue">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                        </div>
                                        <input type="text" class="spinner-input form-control">
                                        <div class="spinner-buttons input-group-btn">
                                            <button type="button" class="btn spinner-down red">
                                                <i class="fa fa-minus"></i>
                                            </button>
                                        </div>
                                    </div>                                
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="postData.taskType == 13">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-4">执行间隔时间:</label>
                                <div class="col-md-2">
                                    <div class="input-group" style="width:150px;">
                                        <input ng-model="postData.simpleRepeatInterval" type="text" class="spinner-input form-control" ng-required="postData.simpleRepeatCount != 1">
                                        <span class="input-group-addon bootstrap-touchspin-postfix">秒</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--简单任务特有配置结束-->
                </div>
            </form>
            <div class="modal-footer">
                <button type="button" class="btn grey-salsa btn-outline" ng-click="cancel()">取消</button>
                <button type="button" class="btn btn-success" ng-disabled="ngForm.$invalid " ng-click="ok()">保存
                </button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
</script>
<script type="text/ng-template" id="workFlowModal.html">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" ng-click="cancel()"></button>
            <h4 class="modal-title">编辑流程</h4>

        </div>
        <div class="modal-body"
             onload="if (window.goSamples) goSamples()">
            <go-diagram work-flow-data="workFlowData" sub-task="subTask"></go-diagram>
            <div class="modal-footer">
                <button type="button" class="btn grey-salsa btn-outline" ng-click="cancel()">取消</button>
                <button type="button" class="btn btn-success" ng-disabled="ngForm.$invalid " ng-click="ok()">保存
                </button>
            </div>
        </div>

    </div>
</script>
<script type="text/ng-template" id="workFlow.html">
    <div style="position: relative;display: flex">

        <span id="paletteSpan"
              style="display: inline-block; vertical-align: top;width: 20%;height: 600px;text-align: center">
            <b>可选子流程任务</b>
            <br/>
            <div id="myPaletteDiv" class="diagramStyling"></div>
        </span>
  <span style="display: inline-block; vertical-align: top;width: 80%;text-align: center">
            <b>任务流程图</b>
            <br/>
            <div id="myDiagramDiv" style="height: 600px" class="diagramStyling"></div>
      {{ myPalette }}
        </span>

        <!--<div id="myDiagramDiv" style="width:100%; height:800px"></div>-->

        <!--<div id="paletteDraggable" class="draggable" style="height: 300px;">-->
        <!--<div id="paletteDraggableHandle" class="handle">可选子任务列表</div>-->
        <!--<div id="paletteContainer">-->
        <!--<div id="myPaletteDiv"></div>-->
        <!--</div>-->
        <!--</div>-->
    </div>
</script>
<style type="text/css">
.nv-axislabel , .nv-series text{
    font-family: "微软雅黑" !important;
}
#myPaletteDiv {
    background-color: #F5F5F5;
    width: 100%;
    height: 100%;
}
    td{
        vertical-align: middle!important;
    }
</style>